# ç½‘ç»œæ£€æµ‹åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

ç½‘ç»œæ£€æµ‹æ¨¡å—ç”¨äºæ£€æµ‹ GSManager é¢æ¿æ‰€ä¾èµ–çš„å„ç±»åœ¨çº¿æœåŠ¡çš„è¿æ¥çŠ¶æ€ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿè¯Šæ–­ç½‘ç»œé—®é¢˜ã€‚è¯¥æ¨¡å—é›†æˆåœ¨é¦–é¡µä¸­ï¼Œæ”¯æŒä¸€é”®æ£€æµ‹æ‰€æœ‰æœåŠ¡æˆ–å•ç‹¬æ£€æµ‹ç‰¹å®šæœåŠ¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. æ£€æµ‹æ–¹å¼
- **TCP Ping**ï¼šé€šè¿‡å»ºç«‹ TCP è¿æ¥æµ‹è¯•æœåŠ¡å¯è¾¾æ€§
- **HTTP/HTTPS Ping**ï¼šé€šè¿‡ HTTP è¯·æ±‚æµ‹è¯• Web æœåŠ¡å¯ç”¨æ€§
- **è¶…æ—¶è®¾ç½®**ï¼šé»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 10 ç§’
- **å“åº”æ—¶é—´æ˜¾ç¤º**ï¼šæ˜¾ç¤ºæ¯ä¸ªæœåŠ¡çš„å“åº”å»¶è¿Ÿ

### 2. æ£€æµ‹èŒƒå›´

#### äº’è”ç½‘è¿æ¥
- **ç™¾åº¦**ï¼ˆwww.baidu.comï¼‰
  - ç”¨é€”ï¼šéªŒè¯å¤–ç½‘è¿æ¥çŠ¶æ€
  - å½±å“ï¼šæ— æ³•å¯¹å¤–è¯·æ±‚æ—¶ï¼ŒSteam æ¸¸æˆç­‰éœ€è¦è”ç½‘çš„æœåŠ¡ç«¯ä¼šå—å½±å“

#### Steam ç½‘ç»œ
- **Steamworks APIï¼ˆå…¨çƒï¼‰**ï¼ˆapi.steampowered.comï¼‰
  - ç”¨é€”ï¼šSteam æ¸¸æˆæœåŠ¡ç«¯è”ç½‘åŠŸèƒ½
  - å½±å“ï¼šæ— æ³•è¿æ¥æ—¶ï¼ŒSteam æ¸¸æˆæœåŠ¡ç«¯å¯èƒ½æ— æ³•è¢«æœç´¢æˆ–é€šè¿‡ Steam ç½‘ç»œè¿æ¥
  
- **Steamworks APIï¼ˆåˆä½œ/ç§æœ‰ï¼‰**ï¼ˆpartner.steam-api.comï¼‰
  - ç”¨é€”ï¼šSteam åˆä½œä¼™ä¼´ API
  - å½±å“ï¼šåŒä¸Š

#### Modrinth
- **Modrinth API**ï¼ˆapi.modrinth.comï¼‰
  - ç”¨é€”ï¼šæœç´¢ Minecraft æ•´åˆåŒ…
  - å½±å“ï¼šæ— æ³•æœç´¢ MC æ•´åˆåŒ…
  
- **Modrinth CDN**ï¼ˆcdn.modrinth.comï¼‰
  - ç”¨é€”ï¼šä¸‹è½½ Minecraft æ•´åˆåŒ…
  - å½±å“ï¼šæ— æ³•ä¸‹è½½ MC æ•´åˆåŒ…

#### Minecraft
- **Mojang ä¼šè¯æœåŠ¡å™¨**ï¼ˆsessionserver.mojang.comï¼‰
  - ç”¨é€”ï¼šæ­£ç‰ˆéªŒè¯
  - å½±å“ï¼šæ­£ç‰ˆç©å®¶å¯èƒ½æ— æ³•è¿›æœ
  
- **MSL API**ï¼ˆhttps://api.mslmc.cn/v3ï¼‰
  - ç”¨é€”ï¼šéƒ¨ç½² MC æ ¸å¿ƒ
  - å½±å“ï¼šæ— æ³•éƒ¨ç½² MC æ ¸å¿ƒ

#### GSManager
- **GSManager åœ¨çº¿éƒ¨ç½²æœåŠ¡**ï¼ˆhttp://gsm.server.xiaozhuhouses.asia:10002/ï¼‰
  - ç”¨é€”ï¼šåœ¨çº¿éƒ¨ç½²å’ŒèµåŠ©è€…å¯†é’¥åŠŸèƒ½
  - å½±å“ï¼šæ— æ³•ä½¿ç”¨åœ¨çº¿éƒ¨ç½²å’ŒèµåŠ©è€…å¯†é’¥åŠŸèƒ½
  
- **GSManager é•œåƒæœåŠ¡å™¨**ï¼ˆhttp://download.server.xiaozhuhouses.asia:8082/ï¼‰
  - ç”¨é€”ï¼šç¯å¢ƒç®¡ç†ä¸­çš„åŠ é€Ÿä¸‹è½½
  - å½±å“ï¼šæ— æ³•ä½¿ç”¨åŠ é€Ÿä¸‹è½½åŠŸèƒ½

### 3. UI åŠŸèƒ½

#### ç½‘ç»œçŠ¶æ€æ¨ªå¹…
- **å…¨éƒ¨æ­£å¸¸**ï¼šæ˜¾ç¤ºç»¿è‰²æ¨ªå¹…æç¤º"ç½‘ç»œæ­£å¸¸ä¸”æ— é˜»ï¼Œæ‚¨å¯ä»¥ç•…å¿«ä½¿ç”¨GSManagerä¸­æ‰€æœ‰åœ¨çº¿æœåŠ¡"
- **éƒ¨åˆ†å¼‚å¸¸**ï¼šæ˜¾ç¤ºé»„è‰²æ¨ªå¹…æç¤º"éƒ¨åˆ†ç½‘ç»œæœåŠ¡è¿æ¥å¼‚å¸¸ï¼Œå¯èƒ½å½±å“ç›¸å…³åŠŸèƒ½çš„ä½¿ç”¨"
- **å¯å…³é—­**ï¼šç”¨æˆ·å¯ä»¥ç‚¹å‡»å…³é—­æ¨ªå¹…

#### æ£€æµ‹æŒ‰é’®
- **æ£€æµ‹æ‰€æœ‰**ï¼šä¸€é”®æ£€æµ‹æ‰€æœ‰ç½‘ç»œæœåŠ¡
  - æ£€æµ‹ä¸­æ˜¾ç¤ºè½¬åœˆåŠ è½½å›¾æ ‡
  - æ‰€æœ‰é¡¹ç›®åŒæ—¶æ˜¾ç¤ºæ£€æµ‹ä¸­çŠ¶æ€
  
- **å•é¡¹æ£€æµ‹**ï¼šç‚¹å‡»æ¯ä¸ªé¡¹ç›®å³ä¾§çš„"æ£€æµ‹"æŒ‰é’®
  - ä»…æ£€æµ‹å½“å‰é¡¹ç›®
  - æ£€æµ‹ä¸­æ˜¾ç¤ºè½¬åœˆåŠ è½½å›¾æ ‡

#### åˆ†ç±»æ˜¾ç¤º
- **å¯æŠ˜å è®¾è®¡**ï¼šæ¯ä¸ªåˆ†ç±»å¯ä»¥å±•å¼€/æŠ˜å 
- **åˆ†ç±»çŠ¶æ€å›¾æ ‡**ï¼š
  - ğŸ”µ æ£€æµ‹ä¸­ï¼šè½¬åœˆåŠ è½½å›¾æ ‡
  - âœ… å…¨éƒ¨æˆåŠŸï¼šç»¿è‰²å¯¹å‹¾
  - âŒ å­˜åœ¨å¤±è´¥ï¼šçº¢è‰²å‰å·
  - âš ï¸ æœªæ£€æµ‹ï¼šç°è‰²æç¤ºå›¾æ ‡
- **ç»Ÿè®¡æ˜¾ç¤º**ï¼šæ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„æˆåŠŸæ•°é‡/æ€»æ•°

#### é¡¹ç›®çŠ¶æ€
- **çŠ¶æ€å›¾æ ‡**ï¼š
  - ğŸ”µ `checking`ï¼šè“è‰²è½¬åœˆåŠ è½½
  - âœ… `success`ï¼šç»¿è‰²å¯¹å‹¾
  - âŒ `failed`ï¼šçº¢è‰²å‰å·
  - âš ï¸ `pending`ï¼šç°è‰²æç¤ºå›¾æ ‡
- **å“åº”æ—¶é—´**ï¼šæˆåŠŸæ—¶æ˜¾ç¤ºå“åº”å»¶è¿Ÿï¼ˆmsï¼‰
- **é”™è¯¯æç¤º**ï¼šå¤±è´¥æ—¶æ‚¬åœæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

### 4. è‡ªåŠ¨æ£€æµ‹
- **é¦–æ¬¡åŠ è½½**ï¼šç”¨æˆ·è¿›å…¥é¦–é¡µæ—¶è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡å…¨é¢æ£€æµ‹
- **æ‰‹åŠ¨æ£€æµ‹**ï¼šå…¶ä»–æ—¶å€™éœ€è¦ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»æ£€æµ‹æŒ‰é’®

## æŠ€æœ¯å®ç°

### å‰ç«¯å®ç°

#### 1. ç±»å‹å®šä¹‰ï¼ˆ`client/src/types/index.ts`ï¼‰

```typescript
// ç½‘ç»œæ£€æµ‹é¡¹
export interface NetworkCheckItem {
  id: string
  name: string
  url: string
  status: 'pending' | 'checking' | 'success' | 'failed'
  responseTime?: number
  errorMessage?: string
  lastCheckTime?: string
}

// ç½‘ç»œæ£€æµ‹åˆ†ç±»
export interface NetworkCheckCategory {
  id: string
  name: string
  items: NetworkCheckItem[]
}

// ç½‘ç»œæ£€æµ‹çŠ¶æ€ç®¡ç†
export interface NetworkCheckState {
  categories: NetworkCheckCategory[]
  allChecksComplete: boolean
  allChecksPassed: boolean
  checking: boolean
  lastCheckTime?: string
  
  checkAll: () => Promise<void>
  checkSingle: (categoryId: string, itemId: string) => Promise<void>
  reset: () => void
}
```

#### 2. çŠ¶æ€ç®¡ç†ï¼ˆ`client/src/stores/networkCheckStore.ts`ï¼‰

ä½¿ç”¨ Zustand è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦æ–¹æ³•ï¼š

- **`checkAll()`**ï¼šæ£€æµ‹æ‰€æœ‰é¡¹ç›®
  - ç«‹å³å°†æ‰€æœ‰é¡¹ç›®çŠ¶æ€è®¾ä¸º `checking`
  - è°ƒç”¨ API è¿›è¡Œæ‰¹é‡æ£€æµ‹
  - æ›´æ–°æ‰€æœ‰é¡¹ç›®çš„æ£€æµ‹ç»“æœ
  
- **`checkSingle(categoryId, itemId)`**ï¼šæ£€æµ‹å•ä¸ªé¡¹ç›®
  - å°†æŒ‡å®šé¡¹ç›®çŠ¶æ€è®¾ä¸º `checking`
  - è°ƒç”¨ API è¿›è¡Œå•é¡¹æ£€æµ‹
  - æ›´æ–°è¯¥é¡¹ç›®çš„æ£€æµ‹ç»“æœ
  
- **`reset()`**ï¼šé‡ç½®æ‰€æœ‰æ£€æµ‹çŠ¶æ€

#### 3. API å®¢æˆ·ç«¯ï¼ˆ`client/src/utils/api.ts`ï¼‰

```typescript
// æ£€æµ‹æ‰€æœ‰ç½‘ç»œæœåŠ¡
async checkNetwork() {
  return this.get('/network/check-all')
}

// æ£€æµ‹å•ä¸ªç½‘ç»œæœåŠ¡
async checkSingleNetwork(url: string) {
  return this.post('/network/check-single', { url })
}
```

#### 4. UI ç»„ä»¶ï¼ˆ`client/src/components/NetworkCheck.tsx`ï¼‰

ç»„ä»¶åŠŸèƒ½ï¼š
- ç½‘ç»œçŠ¶æ€æ¨ªå¹…æ˜¾ç¤º
- æ£€æµ‹æŒ‰é’®ï¼ˆå…¨éƒ¨/å•é¡¹ï¼‰
- åˆ†ç±»æŠ˜å å±•å¼€
- çŠ¶æ€å›¾æ ‡åŠ¨æ€æ˜¾ç¤º
- å“åº”æ—¶é—´æ ¼å¼åŒ–
- é”™è¯¯æç¤ºæ‚¬æµ®æ˜¾ç¤º

### åç«¯å®ç°

#### 1. è·¯ç”±æ³¨å†Œï¼ˆ`server/src/index.ts`ï¼‰

```typescript
import networkRouter from './routes/network.js'

app.use('/api/network', networkRouter)
```

#### 2. æ£€æµ‹è·¯ç”±ï¼ˆ`server/src/routes/network.ts`ï¼‰

ä¸»è¦åŠŸèƒ½ï¼š

##### TCP Ping å®ç°
```typescript
function tcpPing(host: string, port: number, timeout: number): Promise<Result>
```
- ä½¿ç”¨ `net.Socket` å»ºç«‹ TCP è¿æ¥
- æµ‹é‡è¿æ¥å»ºç«‹æ—¶é—´
- æ”¯æŒè¶…æ—¶æ§åˆ¶

##### HTTP/HTTPS Ping å®ç°
```typescript
function httpPing(url: string, timeout: number): Promise<Result>
```
- ä½¿ç”¨ `http`/`https` æ¨¡å—å‘é€ GET è¯·æ±‚
- è‡ªåŠ¨è¯†åˆ« HTTP/HTTPS åè®®
- æµ‹é‡è¯·æ±‚å“åº”æ—¶é—´
- æ”¯æŒè¶…æ—¶æ§åˆ¶

##### æ£€æµ‹æ¥å£

**æ£€æµ‹æ‰€æœ‰æœåŠ¡**
```
GET /api/network/check-all
```
è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "data": {
    "results": [
      {
        "id": "baidu",
        "name": "äº’è”ç½‘è¿æ¥çŠ¶æ€",
        "url": "www.baidu.com",
        "status": "success",
        "responseTime": 45
      }
    ],
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

**æ£€æµ‹å•ä¸ªæœåŠ¡**
```
POST /api/network/check-single
Body: { "url": "www.baidu.com" }
```
è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "data": {
    "url": "www.baidu.com",
    "status": "success",
    "responseTime": 45,
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

## é¡µé¢ä½ç½®

ç½‘ç»œæ£€æµ‹æ¨¡å—ä½äºé¦–é¡µï¼ˆHomePageï¼‰ä¸­ï¼Œå¸ƒå±€é¡ºåºï¼š

1. æ—¥æœŸæ—¶é—´å’Œå¤©æ°”æ˜¾ç¤º
2. æ¬¢è¿ä¿¡æ¯
3. ç³»ç»Ÿä¿¡æ¯å¡ç‰‡
4. ç³»ç»ŸçŠ¶æ€ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨ç‡ï¼‰
5. **ğŸ†• ç½‘ç»œæ£€æµ‹æ¨¡å—** â† åœ¨è¿™é‡Œ
6. ç»ˆç«¯å ç”¨ã€æ´»è·ƒç«¯å£ã€æ´»è·ƒè¿›ç¨‹

## ä½¿ç”¨æ–¹æ³•

### 1. é¦–æ¬¡è¿›å…¥
- æ‰“å¼€ GSManager é¢æ¿
- ç™»å½•åè¿›å…¥é¦–é¡µ
- ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œç½‘ç»œæ£€æµ‹
- æŸ¥çœ‹æ¨ªå¹…å’Œå„é¡¹æ£€æµ‹ç»“æœ

### 2. æ‰‹åŠ¨æ£€æµ‹
- ç‚¹å‡»"æ£€æµ‹æ‰€æœ‰"æŒ‰é’®ï¼šæ£€æµ‹æ‰€æœ‰ç½‘ç»œæœåŠ¡
- ç‚¹å‡»å•é¡¹"æ£€æµ‹"æŒ‰é’®ï¼šæ£€æµ‹ç‰¹å®šç½‘ç»œæœåŠ¡
- ç‚¹å‡»åˆ†ç±»æ ‡é¢˜ï¼šå±•å¼€/æŠ˜å åˆ†ç±»è¯¦æƒ…

### 3. æŸ¥çœ‹ç»“æœ
- **ç»¿è‰²å¯¹å‹¾**ï¼šæœåŠ¡è¿æ¥æ­£å¸¸ï¼Œæ˜¾ç¤ºå“åº”æ—¶é—´
- **çº¢è‰²å‰å·**ï¼šæœåŠ¡è¿æ¥å¤±è´¥ï¼Œæ‚¬åœæŸ¥çœ‹é”™è¯¯åŸå› 
- **è½¬åœˆå›¾æ ‡**ï¼šæ­£åœ¨æ£€æµ‹ä¸­
- **ç°è‰²å›¾æ ‡**ï¼šå°šæœªæ£€æµ‹

## æ•…éšœæ’æŸ¥

### æ£€æµ‹å¤±è´¥å¸¸è§åŸå› 

1. **é˜²ç«å¢™é™åˆ¶**
   - æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™è§„åˆ™
   - ç¡®ä¿å…è®¸å‡ºç«™è¿æ¥

2. **ç½‘ç»œé—®é¢˜**
   - æ£€æŸ¥æœåŠ¡å™¨ç½‘ç»œè¿æ¥
   - æµ‹è¯• DNS è§£ææ˜¯å¦æ­£å¸¸

3. **æœåŠ¡ä¸å¯ç”¨**
   - ç›®æ ‡æœåŠ¡å¯èƒ½ä¸´æ—¶ç»´æŠ¤
   - ä½¿ç”¨å¤‡ç”¨æœåŠ¡æˆ–ç¨åé‡è¯•

4. **è¶…æ—¶è®¾ç½®**
   - é»˜è®¤è¶…æ—¶ 10 ç§’
   - ç½‘ç»œè¾ƒæ…¢æ—¶å¯èƒ½è¶…æ—¶

### è°ƒè¯•æ–¹æ³•

1. **æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°**
   - æ£€æŸ¥ API è¯·æ±‚æ˜¯å¦æˆåŠŸ
   - æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

2. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—**
   - æ£€æŸ¥ `server/logs/combined.log`
   - æŸ¥æ‰¾ç½‘ç»œæ£€æµ‹ç›¸å…³é”™è¯¯

3. **æ‰‹åŠ¨æµ‹è¯•**
   - åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ `ping` æˆ– `curl` æµ‹è¯•è¿æ¥
   - éªŒè¯ç½‘ç»œæ˜¯å¦ç•…é€š

## æ³¨æ„äº‹é¡¹

1. **è®¤è¯è¦æ±‚**
   - æ‰€æœ‰æ£€æµ‹æ¥å£éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯
   - ä½¿ç”¨ `authenticateToken` ä¸­é—´ä»¶

2. **æ€§èƒ½è€ƒè™‘**
   - æ£€æµ‹æ“ä½œå¹¶å‘æ‰§è¡Œ
   - é»˜è®¤è¶…æ—¶ 10 ç§’ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…

3. **é”™è¯¯å¤„ç†**
   - å•ä¸ªæœåŠ¡å¤±è´¥ä¸å½±å“å…¶ä»–æœåŠ¡æ£€æµ‹
   - æ‰€æœ‰é”™è¯¯éƒ½ä¼šè¢«æ•è·å¹¶æ˜¾ç¤º

4. **éšç§å®‰å…¨**
   - ä»…æ£€æµ‹è¿æ¥çŠ¶æ€ï¼Œä¸ä¼ è¾“æ•æ„Ÿæ•°æ®
   - ä½¿ç”¨æ ‡å‡†çš„ç½‘ç»œåè®®

## ç›¸å…³æ–‡ä»¶

### å‰ç«¯æ–‡ä»¶
- `client/src/types/index.ts` - ç±»å‹å®šä¹‰
- `client/src/stores/networkCheckStore.ts` - çŠ¶æ€ç®¡ç†
- `client/src/components/NetworkCheck.tsx` - UI ç»„ä»¶
- `client/src/utils/api.ts` - API å®¢æˆ·ç«¯
- `client/src/pages/HomePage.tsx` - é¡µé¢é›†æˆ

### åç«¯æ–‡ä»¶
- `server/src/routes/network.ts` - ç½‘ç»œæ£€æµ‹è·¯ç”±
- `server/src/routes/index.ts` - è·¯ç”±æ³¨å†Œ
- `server/src/index.ts` - æœåŠ¡å™¨ä¸»æ–‡ä»¶
- `server/src/middleware/auth.ts` - è®¤è¯ä¸­é—´ä»¶

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šReactã€TypeScriptã€Zustandã€Tailwind CSSã€Lucide Icons
- **åç«¯**ï¼šNode.jsã€Expressã€TypeScript
- **ç½‘ç»œ**ï¼šnetï¼ˆTCPï¼‰ã€http/httpsï¼ˆHTTPï¼‰

## å¼€å‘è€…

å¦‚éœ€ä¿®æ”¹æˆ–æ‰©å±•ç½‘ç»œæ£€æµ‹åŠŸèƒ½ï¼Œè¯·å‚è€ƒä»¥ä¸ŠæŠ€æœ¯å®ç°éƒ¨åˆ†ï¼ŒæŒ‰ç…§ç°æœ‰ä»£ç ç»“æ„è¿›è¡Œå¼€å‘ã€‚

---

