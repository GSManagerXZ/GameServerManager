# 新手引导功能运行指令

## 启动开发环境

### 1. 启动后端服务器
```bash
cd server
npm install
npm run dev
```

### 2. 启动前端开发服务器
```bash
cd client
npm install
npm run dev
```

## 测试新手引导功能

### 方法一：创建新用户（推荐）
1. 访问 http://localhost:5173
2. 如果没有用户，会自动显示注册界面
3. 创建新的管理员账户
4. 登录后会自动触发新手引导

### 方法二：重置现有用户的引导状态
1. 登录到系统
2. 进入"设置"页面
3. 在"游戏设置"区块中点击"重新启动新手引导"按钮
4. 新手引导界面会立即显示

### 方法三：手动清除存储（开发测试）
1. 打开浏览器开发者工具 (F12)
2. 进入 Application/Storage 标签
3. 清除 localStorage 中的以下项目：
   - `gsm3-auth`
   - `gsm3-onboarding`
4. 刷新页面重新登录

## 功能验证清单

### SteamCMD 步骤
- [ ] 正确检测操作系统平台
- [ ] 在线安装模式可以正常工作
- [ ] 手动路径设置可以正常工作
- [ ] 安装进度正确显示
- [ ] 可以跳过此步骤

### Java 环境检测步骤
- [ ] 正确检测 Java 环境
- [ ] 显示正确的安装说明（根据平台）
- [ ] 下载链接可以正常访问
- [ ] 可以跳过此步骤

### 游戏路径设置步骤
- [ ] 根据平台显示正确的默认路径
- [ ] 路径格式验证正常工作
- [ ] 路径示例可以点击应用
- [ ] 保存功能正常工作
- [ ] 此步骤不能跳过

### 整体流程
- [ ] 进度指示器正确显示
- [ ] 可以前进和后退
- [ ] 完成引导后正确关闭
- [ ] 引导状态正确保存
- [ ] 不会重复显示（除非手动重启）

## 调试信息

### 浏览器控制台
查看以下日志信息：
- 引导状态变化
- API 调用结果
- 错误信息

### 网络面板
检查以下 API 调用：
- `/api/steamcmd/status` - SteamCMD 状态检查
- `/api/steamcmd/install` - SteamCMD 安装
- `/api/games/java/check` - Java 环境检测
- `/api/settings/game-path` - 游戏路径设置

### 本地存储
检查 localStorage 中的数据：
- `gsm3-onboarding` - 引导状态和进度
- `gsm3_default_game_path` - 游戏默认路径备份

## 常见问题排查

### 引导不显示
1. 检查用户是否为首次登录
2. 检查 localStorage 中的引导状态
3. 确认 OnboardingWizard 组件正确加载

### API 调用失败
1. 确认后端服务器正常运行
2. 检查认证 token 是否有效
3. 查看服务器日志中的错误信息

### 样式问题
1. 确认 Tailwind CSS 正确加载
2. 检查深色/浅色主题切换
3. 验证响应式布局

## 生产环境部署

### 构建前端
```bash
cd client
npm run build
```

### 构建后端
```bash
cd server
npm run build
```

### 启动生产服务
```bash
cd server
npm start
```

## 配置文件位置

### 开发环境
- 前端配置：`client/src/config/index.ts`
- 后端配置：`server/src/modules/config/ConfigManager.ts`

### 生产环境
- 应用配置：`server/data/config.json`
- 游戏配置：存储在应用配置的 `game` 字段中

## 日志文件

### 服务器日志
- 位置：`server/logs/`
- 包含引导相关的操作日志和错误信息

### 浏览器日志
- 使用开发者工具查看控制台输出
- 包含前端状态变化和错误信息
